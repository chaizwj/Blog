{"remainingRequest":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Program Files\\_MY\\项目\\博客\\blog-master\\src\\views\\Blog.vue?vue&type=style&index=0&id=781941dc&scoped=true&lang=css&","dependencies":[{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\src\\views\\Blog.vue","mtime":1705065876000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCiAgQGltcG9ydCAiLi4vYXNzZXRzL2Nzcy90eXBvLmNzcyI7CiAgQGltcG9ydCAiLi4vYXNzZXRzL2Nzcy9hbmltYXRlLmNzcyI7CiAgLmNvbnRhaW5lcnsKICAgIGFuaW1hdGlvbjogbWFpbiAxczsKICB9CiAgLm0tYmxvZyB7CiAgICBwYWRkaW5nLXRvcDogNjl2aCAhaW1wb3J0YW50OwogICAgcGFkZGluZy1ib3R0b206IDBweCAhaW1wb3J0YW50OwogIH0KICAuYmxvZy1iYW5uZXIgewogICAgaGVpZ2h0OiA2N3ZoOwogIGJhY2tncm91bmQ6IHVybCgiLi4vYXNzZXRzL2ltYWdlcy9iZzIucG5nIikgY2VudGVyIGNlbnRlciAvICBjb3ZlciBuby1yZXBlYXQ7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDliMWY1OwogIH0KCgoKCgoKCgoKICAgIC8q5b6u5L+h5LqM57u056CBKi8KIC53ZWl4aW57CiAgIHBvc2l0aW9uOnJlbGF0aXZlOwogfQoud2VpeGluOjphZnRlcnsKICBjb250ZW50OiB1cmwoLi4vYXNzZXRzL2ltYWdlcy9wYXkucG5nKTsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgcmlnaHQ6IDIxOHB4OwogIHRvcDogNTBweDsKICB6LWluZGV4OiA5OTsKICB3aWR0aDoyMHB4OwogIGhlaWdodDogMjBweDsKIAogIGJvcmRlci1yYWRpdXM6IDRweDsKICB0cmFuc2Zvcm0tb3JpZ2luOiB0b3AgcmlnaHQ7CiAgdHJhbnNmb3JtOiBzY2FsZSgwKTsKICBvcGFjaXR5OiAwOwogIC13ZWJraXQtdHJhbnNpdGlvbjogYWxsIC40cyBlYXNlLWluLW91dDsKICAtby10cmFuc2l0aW9uOiBhbGwgLjRzIGVhc2UtaW4tb3V0OwogIHRyYW5zaXRpb246IGFsbCAuNHMgZWFzZS1pbi1vdXQ7Cn0KLndlaXhpbjpob3Zlcjo6YWZ0ZXJ7CiAgdHJhbnNmb3JtOnNjYWxlKDEpOwogIG9wYWNpdHk6IDE7Cn0KCgoKI2F7CiAgd2lkdGg6ODUwcHgKfQoKI2J7CiAgd2lkdGg6ODUwcHgKfQoKCiNjewogIHdpZHRoOjg1MHB4Cn0KCi5kewogIG1hcmdpbi1sZWZ0OjI3NXB4Cn0KLmV7CiAgbWFyZ2luLWxlZnQ6Mjc1cHgKfQo="},{"version":3,"sources":["Blog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+uBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Blog.vue","sourceRoot":"src/views","sourcesContent":["<template>\n     <div class=\"home\">\n    <div class=\"blog-banner banner\">\n     <center><h1 class=\"banner-title\"></h1></center>\n       <center><h1 class=\"banner-title\"></h1></center> \n       <center><h1 class=\"banner-title\"></h1></center>\n       <center><h1 class=\"banner-title\"></h1></center>\n        <center><h1 class=\"banner-title\"></h1></center>\n         <center><h1 class=\"banner-title\"></h1></center>\n          <center><h1 class=\"banner-title\"></h1></center>\n           <center><h1 class=\"banner-title\"></h1></center>\n            <center><h1 class=\"banner-title\"></h1></center>\n             <center><h1 class=\"banner-title\"></h1></center>\n              <center><h1 class=\"banner-title\"></h1></center>\n               <center><h1 class=\"banner-title\"></h1></center>\n                <center><h1 class=\"banner-title\"></h1></center>\n                 <center><h1 class=\"banner-title\"></h1></center>\n                  <center><h1 class=\"banner-title\"></h1></center>\n                   <center><h1 class=\"banner-title\"></h1></center>\n                    <center><h1 class=\"banner-title\"></h1></center>\n                     <center><h1 class=\"banner-title\"></h1></center>\n                      <center><h1 class=\"banner-title\"></h1></center>\n      <center><h1 class=\"blog-title animated zoomIn\" style=\"color:white\">博客详情</h1></center>\n    </div>\n\n    \n    <!--中间内容-->\n    <div id=\"waypoint\"  class=\"d\" style=\"margin-top:50px\">\n      <div class=\"ui container\" >\n        <div class=\"ui top attached segment\" id=\"c\">\n          \n          <div class=\"ui horizontal link list\">\n           \n                          <div class=\"item\">\n                            <img :src=\"dataList.user.avatar\" class=\"ui avatar image\">\n                            <div class=\"content\"><a class=\"header\">{{dataList.user.username}}</a></div>\n                          </div>\n\n            <div class=\"item\">\n              <i class=\"calendar icon\"></i> {{dataList.createTime}}\n            </div>\n            <div class=\"item\">\n              <i class=\"eye icon\"></i> {{dataList.views}}\n            </div>\n            <div class=\"item\">\n              <i class=\"thumbs up outline icon\"></i> {{dataList.thumbs}}\n            </div>\n          </div>\n        </div>\n        <div class=\"ui attached segment\" id=\"b\">\n          <!--图片区域-->\n          <img v-bind:src=\"dataList.firstpicture\" class=\"ui fluid rounded image\">\n        </div>\n        \n        <div class=\"ui  attached padded segment\" id=\"a\">\n          <!--内容-->\n          <div class=\"ui right aligned basic segment\">\n            <div class=\"ui orange basic label\">{{dataList.shareStatement}}</div>\n          </div>\n          <h2 class=\"ui center aligned header\" v-text=\"dataList.title\"></h2>\n          <br>\n           \n\n\n\n\n\n                    <!-- v-html 指令  ： -->\n\n\n\n\n\n\n          <div id=\"content\" class=\"typo  typo-selection js-toc-content m-padded-lr-responsive m-padded-tb-large\" v-html=\"dataList.content\" style=\"width: 800px\">\n          </div>\n\n          <!--标签-->\n         <div class=\"m-padded-lr-responsive\">\n<!--            <div class=\"ui basic teal left pointing label\" v-for=\"item in tagList\" :key=\"item.tagId\">{{item.tagName}}</div>-->\n              \n              \n              \n             </div>\n\n         \n\n\n\n\n\n          <div class=\"ui payQR flowing popup transition hidden\">\n\n\n            <div class=\"ui orange basic label\">\n              <div class=\"ui images\" style=\"font-size: inherit !important;\">\n                <div class=\"image\">\n                  <img src=\"https://r.photo.store.qq.com/psc?/V53KcXfb1umonn4HbITu3rINxs43TczD/45NBuzDIW489QBoVep5mcUTT*ciAgjJ0cppZCI5w1ILm3Q2J4WJdIQXJXdXVu5HUtU4pM3n8zAHqY3rf6z3B415ulY*M0Dp.HBBJhfDaF*E!/r\" alt=\"\" class=\"ui rounded bordered image\" style=\"width: 120px\">\n                  <div>支付宝</div>\n                </div>\n                <div class=\"image\">\n                  <img src=\"https://r.photo.store.qq.com/psc?/V53KcXfb1umonn4HbITu3rINxs43TczD/45NBuzDIW489QBoVep5mcaapv*CZPLor9HYeVrOOiVJnvoxLW18OIo4.CeFhPXXRsV3xEfxMyKMRodIkn6GwaENGRnt8bkvhKT7JrLFzM.w!/r\" alt=\"\" class=\"ui rounded bordered image\" style=\"width: 120px\">\n                  <div>微信</div>\n                </div>\n              </div>\n            </div>\n\n\n          </div>\n\n\n\n        </div>\n        <div class=\"ui attached positive message\" style=\"width:850px\">\n          <!--博客信息-->\n          <div class=\"ui middle aligned grid\">\n            <div class=\"eleven wide column\">\n              <ui class=\"list\">\n                \n              </ui>\n            </div>\n            \n          </div>\n        </div>\n            <!--留言区域列表-->\n        <div id=\"comment-container\" class=\"ui bottom attached segment\" style=\"width:850px\">\n          \n          <div class=\"ui blue segment\">\n            <div class=\"ui threaded comments\" style=\"max-width: 100%\">\n              <h3 class=\"ui dividing header\">Comments</h3>\n            \n              <div class=\"comment\" v-for=\"item in commentsList\" :key=\"item.commentid\"    >\n                \n\n                        <!--    根 评论     -->        \n                                <!--   这里必须要用  v-if （和v-show的最大区别：就是会删除dom结构！！\n                           ，而v-show的作用：本质就是设置Visible属性，所以dom结构仍存在，只是不显示罢了- --  -》 出现问题 ：会使得每一次增加 子评论的时候 页面很最下面也会增加一个空白行，很怪异！-->\n             \n                          <!--  只有 root属性为1 的时候，说明它是 根 评论 ，这里只显示根评论。-->\n                <div class=\"content\" v-if=\"item.root==1\"> \n\n                      <a class=\"avatar\">\n                  <img v-bind:src=\"item.user.avatar\">\n                </a>\n                  <a class=\"author\">{{item.user.username}}</a>\n                  <div class=\"metadata\">\n                    \n                  \n                    <span class=\"date\">{{item.createTime}}</span>\n\n                  </div>\n                  <div class=\"text\" v-text=\"item.content\">\n                   \n                  </div>\n\n                  <div class=\"actions\" >\n                   \n                    <a class=\"reply\" @click=\"replyComment(item)\">回复</a>\n                     \n                  </div>\n\n\n                </div>\n     \n   \n\n\n                       <!--    《子》评论 :  （”折叠“）的 回复评论  显示     -->\n\n                        <!--   这里必须要用  v-if （和v-show的最大区别：就是会删除dom结构！！\n                           ，而v-show的作用：本质就是设置Visible属性，所以dom结构仍存在，只是不显示罢了- --  -》 出现问题 ：会使得每一次增加 子评论的时候 页面很最下面也会增加一个空白行，很怪异！-->\n             \n                                                  <!--  root属性为 0  的时候，说明它是 根 评论 ，这里只显示《子》评论。-->\n               <div class=\"comments\"  v-if=\"item.root==1\">\n                  <div class=\"comment\" v-for=\"item2 in item.children\" :key=\"item2.commentid\">\n                    <a class=\"avatar\">\n                      <img :src=\"item2.user.avatar\">\n                    </a>\n                    <div class=\"content\">\n                      <a class=\"author\">{{item2.user.username}}<a class=\"author\" v-if=\"item2.user.username.length!==0\">回复</a><a>{{item2.replyUsername}}:</a></a>\n                      <div class=\"metadata\">\n                        <span class=\"date\">{{item2.createTime}}</span>\n                      </div>\n                      <div class=\"text\" v-text=\"item2.content\">\n                      </div>\n                      <div class=\"actions\" >\n                        \n                        <!--  回复 《子》评论的话，回复的评论就在 它 的下方。     -->\n\n                        <a class=\"reply\" @click=\"replyComment(item2)\">回复</a>\n\n                      </div>\n                    </div>\n                    </div>\n                </div>\n\n\n\n\n\n\n\n\n               \n              </div>\n\n\n            </div>\n          </div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n          <div class=\"ui form\">\n            <el-form ref=\"addForm\" :model=\"formData\">\n            <div class=\"field\">\n\n\n                      <!--  双向数据绑定，输入框 绑定 数据 -->\n              <textarea name=\"content\" v-model=\"formData.content\">\n\n\n\n              </textarea>\n\n\n            </div>\n            </el-form>\n            <div class=\"fields\">\n              <div class=\"field  m-margin-bottom-small m-mobile-wide\">\n\n                <br/>\n               <button class=\"ui blue button m-mobile-wide\" @click=\"addComment\"><i class=\"edit icon\"></i>发布</button>\n\n\n              </div>\n            </div>\n\n          </div>\n\n\n        </div>\n\n\n\n\n\n      </div>\n    </div>\n\n    <div id=\"toolbar\" class=\"m-padded m-fixed m-right-bottom\" >\n      <div class=\"ui vertical icon buttons \">\n       \n        <a href=\"#comment-container\" class=\"ui blue button\" >留言</a>\n        \n        <!-- 点赞   -->\n        <button class=\"ui icon button\" @click=\"thumbsUp\" >\n          <i v-if=\"thumbsFlag\" class=\"thumbs up icon\"></i>\n          \n          <i v-else class=\"thumbs up outline icon\"></i>\n         \n        </button>\n\n        <!--  收藏 -->\n         <button class=\"ui icon button\" @click=\"save\">\n         \n         <i v-if=\"savesFlag\" class=\"el-icon-star-on\"></i>\n          \n          <i v-else class=\"el-icon-star-off\"></i>\n\n        </button>\n\n\n      </div>\n   \n   \n    </div>\n\n\n\n\n\n\n    <div class=\"ui toc-container flowing popup transition hidden\" style=\"width: 250px!important;\">\n      <ol class=\"js-toc\">\n      </ol>\n    </div>\n\n    <div id=\"qrcode\" class=\"ui wechat-qr flowing popup transition hidden \" style=\"width: 130px !important;\">\n<!--      <img src=\"../assets/images/wechat.jpg\" alt=\"\" class=\"ui rounded image\" style=\"width: 120px !important;\">-->\n    </div>\n\n    <br>\n    <br>\n\n\n   \n\n  </div>\n\n</template>\n<script>\n\nexport default {\n  // 注册组件\n  components: {\n    \n  },\n  data () {\n    return {\n\n      formData: {\n        blogid: '',\n        content: '', // 评论内容\n        replyCommentid: 0,\n        replyUid:0,\n        // 做了个判断 ,如果 root 是1,那么就是根评论,那么就是直接插入一条评论.如果是0, 那么它就只是 子评论\n        root:1,\n        replyUsername:''\n      },\n\n      uid: '',\n      user: {},\n      nickname: '',\n      // 被激活的链接地址\n      avatar: '',\n\n\n      dataList: {},\n\n\n      // 所有的 评论 记录 \n      commentsList: [], \n\n      thumbsFlag: false,\n      savesFlag: false,\n    }\n  },\n\n   \n  created () {\n\n    this.getOneBlog()\n    this.getCommentList()\n    this.getUser()\n\n    this.panduan()\n  },\n\n  methods: {\n    panduan () {\n    \n    this.$axios.get('/saves/'+window.sessionStorage.getItem('uid')+'/'+window.sessionStorage.getItem('blogid')).then((res) => {\n  //               如果 后端返回 为非空，所以已经点赞\n             if(res.data.data==false)\n              {\n                this.thumbsFlag = true\n              }    \n              else{\n                this.thumbsFlag = false\n              }\n         \n        })\n\n\n\n        this.$axios.get('/thumbs/'+window.sessionStorage.getItem('uid')+'/'+window.sessionStorage.getItem('blogid')).then((res) => {\n  //               如果 后端返回 为非空，所以已经收藏\n             if(res.data.data==false)\n              {\n                this.savesFlag = true\n              }    \n              else{\n                this.savesFlag = false\n              }\n         \n        })\n    \n    },\n\n    // 添加评论 ，要先验证是否登入，通过token判断\n     addComment () {\n    \n      if (this.toLogin())  {\n\n        this.formData.blogid = sessionStorage.getItem('blogid')\n        // 从session Storage里面获取当前登入用户的信息 ，并且调用  JSON.parse 把字符串转为 js对象 。\n        var comment ={}\n\n        comment.uid=JSON.parse(sessionStorage.getItem('user')).uid\n        comment.blogid = sessionStorage.getItem(\"blogid\")\n        comment.content = this.formData.content\n        comment.replyCommentid = this.formData.replyCommentid\n        comment.replyUid = this.formData.replyUid\n        comment.replyUsername = this.formData.replyUsername\n        comment.root = this.formData.root\n\n\n        if(comment.content=='')\n        {\n          this.$message.success(\"不能发表空评论\")\n        }\n        \n        else{     \n\n\n           \n             this.$axios.post('/comment',comment).then(() => {\n\n                  console.log(comment.root+'- - -- - - ')\n\n           // 进行过滤不良文字。\n            \n\n            this.getCommentList()\n           \n            this.formData.content = '请输入评论信息...'\n            // 弹出提示信息\n            this.$message.success(\"评论成功！\")\n         \n        })\n          \n          \n\n\n        }\n                                            \n       \n      }\n    },\n\n\n\n\n      // 回复他人评论\n    replyComment (item) { \n      // 获取被评论者的uid作为父uid，即 replyUid\n      this.formData.content = '对' + item.user.username + '说点啥吧：(回复时，请删除本行)'\n      this.formData.replyUid = item.user.uid\n      this.formData.replyUsername = item.user.username\n\n      console.log(this.formData.replyUsername+'- - - ')\n\n            // 做了个判断 ,如果 这条评论的 root 属性 是1,那么就是 根 评论,那么就是直接插入并作为它的《子》评论 ；如果是0, 那么它就只是 《子》评论的回复评论，它和《子》评论同属于一个\n      if(item.root==1)\n        this.formData.replyCommentid = item.commentid        \n      else\n        this.formData.replyCommentid = item.replyCommentid\n\n     \n      this.formData.root = 0;\n\n\n      \n    },\n\n\n    //    获取某一篇博客的    所有 评论信息 ，所有每个评论的子评论 List<Comment>数据  \n\n     getCommentList () {\n     \n      const blogid = sessionStorage.getItem('blogid')\n\n                    // 新写法 es6 的 字符串 拼接。\n      this.$axios.get(`/comment/${blogid}`).then(res=>{\n        \n      console.log('comment',res.data.data)\n      this.commentsList = res.data.data\n\n      })\n    \n    },\n\n      //收藏\n      save(){\n\n\nif (this.toLogin()) {\n        \n\n    \n         this.$axios.get('/saves/'+window.sessionStorage.getItem('uid')+'/'+window.sessionStorage.getItem('blogid')).then((res)=>{    \n           \n              //               如果 后端返回 为非空，所以执行 取消收藏  \n             if(res.data.data==false)\n             {          \n                  this.savesFlag=false\n                  this.$confirm('你已经收藏过它了，确定取消收藏', '提示', { // 确认框\n          type: 'info'\n        }).then(() => {\n            \n                     //  删除 saves对应的 收藏记录 \n                        this.$axios.delete('/saves/'+window.sessionStorage.getItem('uid')+'/'+window.sessionStorage.getItem('blogid')).then(()=>{                          \n                             \n                              \n                              this.$message({\n                                type: 'info',\n                                message: '取消收藏'\n                              })  \n                })\n          \n        }).catch(() => {\n             \n        })\n             }\n                 //               如果 后端返回 为空，所以执行 收藏 \n              else \n              {          \n                        this.savesFlag=true\n                // 插入到 saves \n                this.$axios.post('/saves/'+window.sessionStorage.getItem('uid')+'/'+window.sessionStorage.getItem('blogid')).then(()=>{    \n                        this.$message({\n                                type: 'success',\n                                message: '收藏成功'\n                              })  \n                   \n                })\n              }\n          })     \n     }\n\n      },\n\n\n\n\n      // 点赞  \n     thumbsUp () {\n\n      if (this.toLogin()) {\n        \n\n        \n         this.$axios.get('/thumbs/'+window.sessionStorage.getItem('uid')+'/'+window.sessionStorage.getItem('blogid')).then((res)=>{    \n           console.log(res)\n\n           console.log(res.data)\n           console.log(res.data.data)\n              //               如果 后端返回 为非空，所以执行 取消点赞  \n             if(res.data.data==false)\n             {          \n                  \n                  this.$confirm('你已经给它点过赞了，是否确定取消点赞', '提示', { // 确认框\n          type: 'info'\n        }).then(() => {\n\n          this.thumbsFlag = false\n \n             //  1 . 更新 blog表 ，进行thumbs 字段 的 -1  \n                      this.dataList.thumbs--\n              this.$axios.put('/blog/Thumbs/'+this.dataList.blogid+'/'+window.sessionStorage.getItem('uid'),this.dataList).then(()=>{    \n              this.$message({\n            type: 'info',\n            message: '取消点赞'\n          })\n         \n      \n           })\n\n\n\n                     //  2 . 删除 thumbs 表 对应的 点赞记录 \n                        this.$axios.delete('/thumbs/'+window.sessionStorage.getItem('uid')+'/'+window.sessionStorage.getItem('blogid')).then(()=>{    \n                      \n                              console.log('-- - - - ')                    \n                })\n          \n        }).catch(() => {\n         \n         \n        })\n\n\n\n\n              \n             \n\n            \n             }\n\n           \n            \n\n                 //               如果 后端返回 为空，所以执行 点赞   \n              else \n              { \n                        this.thumbsFlag = true\n                        this.dataList.thumbs++\n                        // 更新 对应的blog的thumbs属性 +1\n                this.$axios.put('/blog/Thumbs/'+this.dataList.blogid+'/'+window.sessionStorage.getItem('uid'),this.dataList).then(()=>{    \n                        this.$message({\n                      type: 'success',\n                      message: '点赞成功'\n                    })\n                    \n                \n                })\n\n\n                // 插入到 thumbs表 \n                this.$axios.post('/thumbs/'+window.sessionStorage.getItem('uid')+'/'+window.sessionStorage.getItem('blogid')).then(()=>{    \n                        \n                    console.log('123')\n                })\n\n\n              }\n\n\n          })\n      \n     }\n\n\n    },\n\n\n\n    //  判断是否登入，不然不能点赞和评论\n    toLogin () {\n      const tokenStr = window.sessionStorage.getItem('token')\n      // 后端指定接口验证了token的正确性\n      if (!tokenStr) {\n\n        \n        this.$confirm('登录后才能发表评论或者点赞，请问是否先登录？', '提示', { // 确认框\n          type: 'info'\n        }).then(() => {\n          this.$router.push('/login')\n        }).catch(() => {\n          this.$message({\n            type: 'info',\n            message: '你选择不登录'\n          })\n          return false\n        })\n\n      }\n      return !!tokenStr\n   \n          },\n\n    \n\n    \n\n\n\n\n\n\n    //    获取某一篇博客的     详细内容\n    \n     getOneBlog () {\n\n              \n\n         \n\n\n\n              const blogid = sessionStorage.getItem('blogid')\n            \n            \n            this.$axios.get(`/blog/${blogid}`).then(res=>{\n          \n            \n              console.log('oneblog',res.data)\n              this.dataList=res.data.data\n            \n            console.log('abc',this.dataList)\n\n            //  两次 发axios。内部就是 增加一次 views 浏览器次数\n            this.dataList.views++\n            \n              this.$axios.put('/blog/views',this.dataList).then(res=>{\n            \n              console.log('views',res.data)\n              \n              \n\n                }\n            )\n              \n              \n            })\n\n       \n      \n    \n    },\n \n\n  \n\n\n\n\n\n    getUser () {\n      this.user = window.sessionStorage.getItem('user')\n      if (this.user != null) {\n        this.uid = JSON.parse(this.user).uid\n        this.nickname = JSON.parse(this.user).nickname\n        this.avatar = JSON.parse(this.user).avatar\n      }\n    },\n    logout () {\n      window.sessionStorage.clear()\n      this.$router.push('/home')\n      // 刷新页面，删除vuex数据\n      window.location.reload()\n    }\n  },\n\n\n\n\n\n  mounted () {\n    // 有效\n    setTimeout(() => {\n      this.reloadPrism()\n      // eslint-disable-next-line no-undef\n      tocbot.init({\n        // Where to render the table of contents.\n        tocSelector: '.js-toc',\n        // Where to grab the headings to build the table of contents.\n        contentSelector: '.js-toc-content',\n        // Which headings to grab inside of the contentSelector element.\n        headingSelector: 'h1, h2, h3'\n      })\n    }, 1000)\n\n   \n    \n  }\n}\n</script>\n\n<style scoped>\n  @import \"../assets/css/typo.css\";\n  @import \"../assets/css/animate.css\";\n  .container{\n    animation: main 1s;\n  }\n  .m-blog {\n    padding-top: 69vh !important;\n    padding-bottom: 0px !important;\n  }\n  .blog-banner {\n    height: 67vh;\n  background: url(\"../assets/images/bg2.png\") center center /  cover no-repeat;\n    background-color: #49b1f5;\n  }\n\n\n\n\n\n\n\n\n\n    /*微信二维码*/\n .weixin{\n   position:relative;\n }\n.weixin::after{\n  content: url(../assets/images/pay.png);\n  position: absolute;\n  right: 218px;\n  top: 50px;\n  z-index: 99;\n  width:20px;\n  height: 20px;\n \n  border-radius: 4px;\n  transform-origin: top right;\n  transform: scale(0);\n  opacity: 0;\n  -webkit-transition: all .4s ease-in-out;\n  -o-transition: all .4s ease-in-out;\n  transition: all .4s ease-in-out;\n}\n.weixin:hover::after{\n  transform:scale(1);\n  opacity: 1;\n}\n\n\n\n#a{\n  width:850px\n}\n\n#b{\n  width:850px\n}\n\n\n#c{\n  width:850px\n}\n\n.d{\n  margin-left:275px\n}\n.e{\n  margin-left:275px\n}\n</style>\n"]}]}