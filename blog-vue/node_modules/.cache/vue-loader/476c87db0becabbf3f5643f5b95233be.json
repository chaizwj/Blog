{"remainingRequest":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Program Files\\_MY\\项目\\博客\\blog-master\\src\\views\\Login.vue?vue&type=style&index=0&id=7ea248ad&lang=less&scoped=true&","dependencies":[{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\src\\views\\Login.vue","mtime":1705065876000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouYmFubmVyLXRpdGxlIHsKICBhbmltYXRpb246IHRpdGxlLXNjYWxlIDFzOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDI1cmVtOwogIHBhZGRpbmc6IDAgMC41cmVtOwogIHdpZHRoOiAxMDAlOwogIGZvbnQtc2l6ZTogMi41cmVtOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBjb2xvcjogI2VlZTsKfQouYXJjaGl2ZS1iYW5uZXIgewogIGhlaWdodDogMTEwdmg7CiAgYmFja2dyb3VuZDogdXJsKCIuLi9hc3NldHMvaW1hZ2VzL2JnNy5wbmciKSBjZW50ZXIgY2VudGVyIC8KIGNvdmVyIG5vLXJlcGVhdDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDliMWY1Owp9Ci5sb2dpbl9jb250YWluZXIgewogIGJhY2tncm91bmQtY29sb3I6ICMyYjRiNmI7CiAgaGVpZ2h0OiAxMDAlOwp9Ci5sb2dpbl9ib3ggewogIHdpZHRoOiA0NTBweDsKICBoZWlnaHQ6IDM2MHB4OwogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7CiAgYm9yZGVyLXJhZGl1czogM3B4OwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBsZWZ0OiA1MCU7CiAgdG9wOiA1MCU7CiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7CgogIC5hdmF0YXJfYm94IHsKICAgIGhlaWdodDogMTMwcHg7CiAgICB3aWR0aDogMTMwcHg7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjZWVlOwogICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgcGFkZGluZzogMTBweDsKICAgIGJveC1zaGFkb3c6IDAgMCAxMHB4ICNkZGQ7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBsZWZ0OiA1MCU7CiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsKICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7CiAgICBpbWcgewogICAgICB3aWR0aDogMTAwJTsKICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWU7CiAgICB9CiAgfQp9CgoubG9naW5fZm9ybSB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGJvdHRvbTogMDsKICB3aWR0aDogMTAwJTsKICBwYWRkaW5nOiAwIDIwcHg7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKfQoKLmJ0bnMgewogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsKfQouYXZhdGFyLXVwbG9hZGVyIC5lbC11cGxvYWQgewogIGJvcmRlcjogNXB4IGRhc2hlZCAjZDlkOWQ5OwogIGJvcmRlci1yYWRpdXM6IDZweDsKICBjdXJzb3I6IHBvaW50ZXI7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIG92ZXJmbG93OiBoaWRkZW47Cn0KLmF2YXRhci11cGxvYWRlciAuZWwtdXBsb2FkOmhvdmVyIHsKICBib3JkZXItY29sb3I6ICM0MDlFRkY7Cn0KLmF2YXRhci11cGxvYWRlci1pY29uIHsKICBmb250LXNpemU6IDI4cHg7CiAgY29sb3I6ICM4YzkzOWQ7CiAgd2lkdGg6IDE3OHB4OwogIGhlaWdodDogMTc4cHg7CiAgbGluZS1oZWlnaHQ6IDE3OHB4OwogIHRleHQtYWxpZ246IGNlbnRlcjsKfQouYXZhdGFyIHsKICB3aWR0aDogNjBweDsKICBoZWlnaHQ6IDYwcHg7CiAgZGlzcGxheTogYmxvY2s7Cn0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"login_container\">\n      <!-- banner -->\n      <div class=\"archive-banner banner\">\n        <h1 class=\"banner-title\">归档</h1>\n      </div>\n      <div class=\"login_box\">\n      <!-- 头像区域 -->\n      <div class=\"avatar_box\">\n        <img src=\"../assets/images/login_icon.png\" alt=\"\">\n      </div>\n        <!-- 登录表单区域 -->\n        <el-form ref=\"loginFormRef\" :model=\"loginForm\" :rules=\"loginFormRules\" label-width=\"0px\" class=\"login_form\">\n          <!-- 用户名 -->\n          <el-form-item prop=\"username\">\n            <el-input v-model=\"loginForm.username\" placeholder=\"请输入用户名\" prefix-icon=\"el-icon-user-solid\"></el-input>\n          </el-form-item>\n          <!-- 密码 -->\n          <el-form-item prop=\"password\">\n            <el-input v-model=\"loginForm.password\" placeholder=\"请输入密码\" prefix-icon=\"el-icon-moon-night\" type=\"password\"></el-input>\n          </el-form-item>\n         \n         \n          <el-form-item prop=\"code\">\n\n\n\n\n          \n\n\n\n\n\n\n          </el-form-item>\n\n\n          <!-- 按钮区域 -->\n          <el-form-item class=\"btns\">\n            <el-button type=\"success\" @click=\"handleCreate\">注册</el-button>\n            <el-button type=\"primary\" @click=\"login\">登录</el-button>\n            <el-button type=\"info\" @click=\"resetLoginForm\">重置</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n\n\n\n    \n\n      <!-- 注册弹层-->\n      <div class=\"add-form\">\n        <el-dialog title=\"注册用户\" :visible.sync=\"dialogFormVisible\">\n          <el-form ref=\"registForm\" :model=\"formData\" :rules=\"loginFormRules\" label-position=\"right\"\n                   label-width=\"100px\">\n            <el-row>\n              <el-col :span=\"12\">\n                <el-form-item label=\"用户名\" prop=\"username\">\n                  <el-input label=\"请输入用户名\" v-model=\"formData.username\"/>\n                </el-form-item>\n              </el-col>\n              <el-col :span=\"12\">\n                <el-form-item label=\"密码\" prop=\"password\">\n                  <el-input  show-password  v-model=\"formData.password\"/>\n                </el-form-item>\n              </el-col>\n            </el-row>\n          <el-row>\n            \n          \n          </el-row>\n\n\n            <el-col :span=\"24\">\n              <el-form-item label=\"头像地址\">\n                <el-input v-model=\"formData.avatar\"/>\n              </el-form-item>\n            </el-col>\n\n\n\n\n\n          </el-form>\n          <div slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click=\"dialogFormVisible = false\">取消</el-button>\n            <el-button type=\"primary\" @click=\"regist()\">确定</el-button>\n          </div>\n        </el-dialog>\n      </div>\n\n\n\n\n\n\n\n\n    </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      imageUrl: '',\n      verifyCode: '',\n    \n    \n\n\n    // 注册  的表单 \n    formData: {\n        username: '',\n        password: '',\n    \n      \n        avatar: '头像参考地址：https://unsplash.it/800/450?image= 1032 这里写 一个数字即可'\n      },\n      dialogFormVisible: false, // 增加表单是否可见\n    \n    \n    \n    \n    \n    // 这是  登录  表单  的数据绑定对象\n      loginForm: {\n        username: '',\n        password: '',\n        verKey: '',\n        code: ''\n      },\n\n\n      // 这是表单的验证规则对象\n      loginFormRules: {\n        // 验证用户名是否合法\n        username: [\n          { required: true, message: '请输入登录名称', trigger: 'blur' },\n          { min: 3, max: 15, message: '长度在 3 到 15 个字符', trigger: 'blur' }\n        ],\n        // 验证密码是否合法\n        password: [\n          { required: true, message: '请输入登录密码', trigger: 'blur' },\n          { min: 6, max: 20, message: '长度在 6 到 20 个字符', trigger: 'blur' }\n        ],\n       \n        nickname: [\n          { required: true, message: '请输入昵称', trigger: 'blur' },\n          { min: 3, max: 15, message: '长度在 3 到 15 个字符', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n\n\n\n  created () {\n    this.getVerifyCode()\n  },\n\n\n  methods: {\n    masterFileMax (files, fileList) {\n      console.log(files, fileList)\n      this.$message.warning('请最多上传一张图片')\n    },\n    async uploadPic (param) {\n      var fileObj = param.file\n      var form = new FormData()\n    \n\n    // 文件对象\n      form.append('file', fileObj)\n      const { data: res } = await this.$http.post('/serverApi/oss/userAvatar', form)\n      if (res.flag) {\n        // 弹出提示信息\n        this.$message.success('上传头像成功')\n        this.formData.avatar = res.data.url\n        console.log(res.data.url)\n      } else { // 执行失败\n        this.$message.error(res.message)\n      }\n    },\n\n\n\n    handleAvatarSuccess (res, file) {\n      this.imageUrl = URL.createObjectURL(file.raw)\n    },\n\n\n    beforeAvatarUpload (file) {\n      const isJPG = file.type === 'image/jpeg'\n      const isLt5M = file.size / 1024 / 1024 < 5\n\n      if (!isJPG) {\n        this.$message.error('上传头像图片只能是 JPG 格式!')\n      }\n      if (!isLt5M) {\n        this.$message.error('上传头像图片大小不能超过5MB!')\n      }\n      return isJPG && isLt5M\n    },\n\n\n\n\n\n\n    async getVerifyCode () {\n      this.$axios.get('/code/getCode').then(res=> {  \n      \n      this.verifyCode = res.data\n      \n      this.loginForm.verKey = res.code\n      \n      }\n\n    \n      )\n      \n      // this.$message({\n      //   message: '部分功能只在用户登录后开发',\n      //   type: 'info'\n      // })\n    },\n\n\n\n    // 点击重置按钮，重置登录表单\n    resetLoginForm () {\n      this.$refs.loginFormRef.resetFields()\n    },\n    // 弹出添加窗口\n    handleCreate () {\n      this.dialogFormVisible = true\n    },\n\n\n\n    regist () {\n\n      // 进行表单校验\n      this.$refs.registForm.validate((valid) => {\n\n        if (valid) {\n\n        \n         \n          this.$axios.post('/user',this.formData).then((res) => {\n\n        \n\n          // 关闭新增窗口\n            this.dialogFormVisible = false\n            if (res.data.flag) {\n              // 弹出提示信息\n              this.$message({\n                message: '注册成功，快来登录吧！',\n                type: 'success'\n              })\n            }\n\n\n\n          })\n        } \n        \n        \n\n\n\n      })\n    },\n\n\n\n\n\n        //    校验 用户密码是否正确，并且从后端传来一个token令牌\n\n    login () {\n\n      this.$refs.loginFormRef.validate(async valid => {\n        if (!valid) return\n       \n         \n        this.$axios.get('/user/login'+'/'+this.loginForm.username).then(res=>{ \n          \n         \n          \n         window.sessionStorage.setItem('uid',res.data.data.uid)\n        window.sessionStorage.setItem('username',res.data.data.username)\n\n\n\n          console.log('login_token',res.data)\n            // 1. 将登录成功之后的 token，保存到客户端的 sessionStorage 中\n          //   1.1 项目中出了登录之外的其他API接口，必须在登录之后才能访问\n          //   1.2 token 只应在当前网站打开期间生效，所以将 token 保存在 sessionStorage 中\n         \n         window.sessionStorage.setItem('token', res.data.data.token)\n        //  JSON.stringify 方法是内置的，用来把后端的传来的对象转换为 字符串！！\n        // 登入之后，从后端传来的对象一般都是要保存在sessionStorage里面，用于之后的评论操作啥的，提供用户数据\n         window.sessionStorage.setItem('user', JSON.stringify(res.data.data))\n\n            \n            // 2. 通过   编程式路由    根据 你的账号 选择跳转到后台主页 还是管理员界面 \n           if(this.loginForm.password==res.data.data.password)\n            {   \n\n\n                if(this.loginForm.username=='admin')\n                  {\n                    this.$message.success('登录成功')\n                    this.$router.push('/adminHome')\n\n                  }\n                  \n                  else{\n                     this.$message.success('登录成功')\n                this.$router.push('/home')\n                  }\n               \n\n\n            }\n            else{\n\n               this.$message.error(\"登入失败,密码错误，请重新输入\")\n               this.resetLoginForm()\n            }\n           \n        })\n        \n        \n          \n          \n          \n         \n        \n\n\n      })\n\n      }\n\n\n\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  .banner-title {\n    animation: title-scale 1s;\n    position: absolute;\n    top: 25rem;\n    padding: 0 0.5rem;\n    width: 100%;\n    font-size: 2.5rem;\n    text-align: center;\n    color: #eee;\n  }\n  .archive-banner {\n    height: 110vh;\n    background: url(\"../assets/images/bg7.png\") center center /\n   cover no-repeat;\n    background-color: #49b1f5;\n  }\n  .login_container {\n    background-color: #2b4b6b;\n    height: 100%;\n  }\n  .login_box {\n    width: 450px;\n    height: 360px;\n    background-color: #fff;\n    border-radius: 3px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n\n    .avatar_box {\n      height: 130px;\n      width: 130px;\n      border: 1px solid #eee;\n      border-radius: 50%;\n      padding: 10px;\n      box-shadow: 0 0 10px #ddd;\n      position: absolute;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      background-color: #fff;\n      img {\n        width: 100%;\n        height: 100%;\n        border-radius: 50%;\n        background-color: #eee;\n      }\n    }\n  }\n\n  .login_form {\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    padding: 0 20px;\n    box-sizing: border-box;\n  }\n\n  .btns {\n    display: flex;\n    justify-content: flex-end;\n  }\n  .avatar-uploader .el-upload {\n    border: 5px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n  .avatar-uploader .el-upload:hover {\n    border-color: #409EFF;\n  }\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n  }\n  .avatar {\n    width: 60px;\n    height: 60px;\n    display: block;\n  }\n</style>\n"]}]}