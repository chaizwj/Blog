{"remainingRequest":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Program Files\\_MY\\项目\\博客\\blog-master\\src\\views\\admin\\changeUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\src\\views\\admin\\changeUser.vue","mtime":1705065876000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgICAgdmFsdWU6ZmFsc2UsCiAgICAgIGltYWdlVXJsOiAnJywKCiAgICAvL+ihqOWNlee7keWumueahOaVsOaNru+8jCAKICAgICAgZm9ybURhdGE6IHt9LAoKCgogICAgICB1c2VyUnVsZXM6IHsKICAgICAgICAvLyDpqozor4HnlKjmiLflkI3mmK/lkKblkIjms5UKICAgICAgICAKICAgICAgICAvLyDpqozor4Hlr4bnoIHmmK/lkKblkIjms5UKICAgICAgICBwYXNzd29yZDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeeZu+W9leWvhueggScsIHRyaWdnZXI6ICdibHVyJyB9LAogICAgICAgICAgeyBtaW46IDYsIG1heDogMjAsIG1lc3NhZ2U6ICfplb/luqblnKggNiDliLAgMjAg5Liq5a2X56ymJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICAKICAgICAgICBhdmF0YXI6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXlpLTlg4/lnLDlnYAnLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICAgIHsgbWluOiAxLCBtYXg6IDE1MCwgbWVzc2FnZTogJ+mVv+W6puWcqCAxIOWIsCAxNTAg5Liq5a2X56ymJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdCiAgICAgIH0KICAgIH0KICB9LAoKCiAgY3JlYXRlZCAoKSB7CgoKICAgIHRoaXMuZ2V0VXNlcigpCgoKICB9LAoKCgogY29tcHV0ZWQ6ewogICAgIHN0YXRlKCl7CgogICAgICAgICAgICAgICAgIGxldCB0ZXh0PScnIAogICAgICAgICAgICBpZih0aGlzLmZvcm1EYXRhLmlzRmxhZz09MCkKICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgIHRleHQgPSAn5pmu6YCa55So5oi3JwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgZWxzZSBpZih0aGlzLmZvcm1EYXRhLmlzRmxhZz09MSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGV4dD0n55Sz6K+35Y2a5Li75LitJwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgZWxzZSBpZih0aGlzLmZvcm1EYXRhLmlzRmxhZz09MikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGV4dD0n5Y2a5Li7JwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYodGhpcy5mb3JtRGF0YS5pc0ZsYWc9PS0xKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0ZXh0PSfnrqHnkIblkZgnCiAgICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gdGV4dAoKICAgICB9CgogfSwKCiAgbWV0aG9kczogewoKICAgICAgYWNjZXB0KCl7CgogICAgICAgICAgICAgICAgdGhpcy5mb3JtRGF0YS5pc0ZsYWcgPSAyCiAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhLmJsb2dnZXIgPSAxCgogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCflrqHmoLjpgJrov4cnKQogICAgICAKICAgICAgfSwKCgogICAgbWFzdGVyRmlsZU1heCAoZmlsZXMsIGZpbGVMaXN0KSB7CiAgICAgIGNvbnNvbGUubG9nKGZpbGVzLCBmaWxlTGlzdCkKICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fmnIDlpJrkuIrkvKDkuIDlvKDlm77niYcnKQogICAgfSwKCgoKCiAgICAgdXBsb2FkUGljIChwYXJhbSkgewogICAgICB2YXIgZmlsZU9iaiA9IHBhcmFtLmZpbGUKICAgICAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKQogICAgICAvLyDmlofku7blr7nosaEKICAgICAgZm9ybS5hcHBlbmQoJ2ZpbGUnLCBmaWxlT2JqKQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gIHRoaXMuJGh0dHAucG9zdCgnL3NlcnZlckFwaS9vc3MvdXNlckF2YXRhcicsIGZvcm0pCiAgICAgIGlmIChyZXMuZmxhZykgewogICAgICAgIC8vIOW8ueWHuuaPkOekuuS/oeaBrwogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5LiK5Lyg5aS05YOP5oiQ5YqfJykKICAgICAgICB0aGlzLmZvcm1EYXRhLmF2YXRhciA9IHJlcy5kYXRhLnVybAogICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhLnVybCkKICAgICAgfSBlbHNlIHsgLy8g5omn6KGM5aSx6LSlCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSkKICAgICAgfQogICAgfSwKCgoKICAgIGhhbmRsZUF2YXRhclN1Y2Nlc3MgKHJlcyxmaWxlKSB7CiAgICAgIHRoaXMuaW1hZ2VVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUucmF3KQogICAgfSwKCgoKICAgIGJlZm9yZUF2YXRhclVwbG9hZCAoZmlsZSkgewogICAgICBjb25zdCBpc0pQRyA9IGZpbGUudHlwZSA9PT0gJ2ltYWdlL2pwZWcnCiAgICAgIGNvbnN0IGlzTHQ1TSA9IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgNQoKICAgICAgaWYgKCFpc0pQRykgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOWktOWDj+WbvueJh+WPquiDveaYryBKUEcg5qC85byPIScpCiAgICAgIH0KICAgICAgaWYgKCFpc0x0NU0pIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDlpLTlg4/lm77niYflpKflsI/kuI3og73otoXov4c1TUIhJykKICAgICAgfQogICAgICByZXR1cm4gaXNKUEcgJiYgaXNMdDVNCiAgICB9LAoKCgogICAgICAgIC8vICDmm7TmlrDkuKrkurrkv6Hmga8KICAgIHN1Ym1pdEZvcm0gKCkgewogICAgICAvLyDov5vooYzooajljZXmoKHpqowKICAgICAgdGhpcy4kcmVmcy51c2VyRm9ybS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIAogICAgICAgIAogICAgICAgIHsKICAgICAgICAgIC8vIOihqOWNleagoemqjOmAmui/h++8jOWPkWFqYXjor7fmsYLvvIzmiormlbDmja7lvZXlhaXoh7PlkI7lj7DlpITnkIYKICAgICAgICAgIHRoaXMuZm9ybURhdGEudWlkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnYWRtaW5fYmxvZ2lkJykKICAgICAgICAgIAogICAgICAgICAgY29uc29sZS5sb2codGhpcy5mb3JtRGF0YS51c2VybmFtZSkKICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZm9ybURhdGEudWlkKQogICAgICAgICAgdGhpcy4kYXhpb3MucHV0KCcvdXNlcicsIHRoaXMuZm9ybURhdGEpLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAKCiAgICAgICAgICAgCgoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgaWYocmVzLmRhdGEuZmxhZykgewogICAgICAgICAgICAgIC8vIOW8ueWHuuaPkOekuuS/oeaBrwogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgbWVzc2FnZTogJ+S/ruaUueaIkOWKn++8gScsCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9IAogICAgICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIGVsc2UgeyAvLyDmiafooYzlpLHotKUKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5kYXRhLm1lc3NhZ2UpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFVzZXIoKQogICAgICAgICAgfSkKICAgICAgICB9IAogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIGVsc2UgCiAgICAgICAgeyAvLyDmoKHpqozkuI3pgJrov4cKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+agoemqjOWksei0pe+8jOivt+ajgOafpei+k+WFpeagvOW8jycpCiAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICB9CgoKICAgICAgfSkKICAgIH0sCgoKICAgIHJlc2V0Rm9ybSAoZm9ybU5hbWUpIHsKICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0ucmVzZXRGaWVsZHMoKQogICAgfSwKCgoKCiAgICAgIC8v5YWI6I635Y+W5b2T5YmN55So5oi355qE5Liq5Lq65L+h5oGvIAogICAgZ2V0VXNlciAoKSB7CgoKICAgICAgIHRoaXMuJGF4aW9zLmdldCgnL3VzZXIvJytzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdhZG1pbl9ibG9naWQnKSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIC8vIOWFs+mXreaWsOWinueql+WPowoKICAgICAgICAgICAgCiAgICAgICAgICAgIHRoaXMuZm9ybURhdGEgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgCiAgICAgICAgICB9KQoKCgogICAgfQogIH0KCgoKCgp9Cg=="},{"version":3,"sources":["changeUser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;;;AAGA;;;;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;;;;;AAKA;AACA;;;AAGA;AACA;;;AAGA;;AAEA;;;;AAIA;AACA;;;;;;AAMA","file":"changeUser.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\n  <div class=\"blogs\">\n    <div class=\"content-header\">\n      <h1><small>管理所有用户</small></h1>\n      <el-breadcrumb separator-class=\"el-icon-arrow-right\" class=\"breadcrumb\">\n        \n      </el-breadcrumb>\n    </div>\n\n    <!--中间内容-->\n    <div class=\"app-container\">\n      <div class=\"box\">\n\n\n\n\n        <el-form :model=\"formData\" :rules=\"userRules\" ref=\"userForm\" label-width=\"100px\">\n         \n           <!--  第二行 -->\n          <el-row>\n            <el-col :span=\"8\">\n              <el-form-item prop=\"username\" label=\"用户名\" >\n                <el-input v-model=\"formData.username\" ></el-input>\n              </el-form-item>\n            </el-col>\n\n\n            <el-col :span=\"8\">\n              <el-form-item prop=\"password\" label=\"密码\">\n                <el-input v-model=\"formData.password\"></el-input>\n              </el-form-item>\n            </el-col>\n            \n          </el-row>\n         \n\n\n                <!--  第二行 -->\n            <el-row>\n            <el-col :span=\"8\">\n              <el-form-item prop=\"username\" label=\"用户状态\" >\n                <el-input :value=\"state\" type=\"text\"></el-input>\n              </el-form-item>\n            </el-col>\n\n\n            <el-col :span=\"8\">\n              <el-form-item prop=\"password\" label=\"审核\" v-show=\"formData.isFlag==1\">\n               \n                    <el-switch  v-model=\"value\" @change=\"accept\">     </el-switch>\n\n              </el-form-item>\n            </el-col>\n            \n          </el-row>\n\n            \n\n           \n\n\n          <el-form-item>\n\n            <el-button type=\"primary\" @click=\"submitForm\" >立即修改</el-button>\n<!--            <el-button @click=\"resetForm('formData')\">重置</el-button>-->\n          </el-form-item>\n\n\n\n\n        </el-form>\n\n        \n      </div>\n    </div>\n    <br>\n    <br>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n        value:false,\n      imageUrl: '',\n\n    //表单绑定的数据， \n      formData: {},\n\n\n\n      userRules: {\n        // 验证用户名是否合法\n        \n        // 验证密码是否合法\n        password: [\n          { required: true, message: '请输入登录密码', trigger: 'blur' },\n          { min: 6, max: 20, message: '长度在 6 到 20 个字符', trigger: 'blur' }\n        ],\n      \n        avatar: [\n          { required: true, message: '请输入头像地址', trigger: 'blur' },\n          { min: 1, max: 150, message: '长度在 1 到 150 个字符', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n\n\n  created () {\n\n\n    this.getUser()\n\n\n  },\n\n\n\n computed:{\n     state(){\n\n                 let text='' \n            if(this.formData.isFlag==0)\n            { \n                text = '普通用户'\n                }\n\n            else if(this.formData.isFlag==1)\n            {\n                text='申请博主中'\n                }\n\n            else if(this.formData.isFlag==2)\n            {\n                text='博主'\n            }\n            else if(this.formData.isFlag==-1)\n            {\n                text='管理员'\n            }\n\n          return text\n\n     }\n\n },\n\n  methods: {\n\n      accept(){\n\n                this.formData.isFlag = 2\n                this.formData.blogger = 1\n\n                this.$message.success('审核通过')\n      \n      },\n\n\n    masterFileMax (files, fileList) {\n      console.log(files, fileList)\n      this.$message.warning('请最多上传一张图片')\n    },\n\n\n\n\n     uploadPic (param) {\n      var fileObj = param.file\n      var form = new FormData()\n      // 文件对象\n      form.append('file', fileObj)\n      const { data: res } =  this.$http.post('/serverApi/oss/userAvatar', form)\n      if (res.flag) {\n        // 弹出提示信息\n        this.$message.success('上传头像成功')\n        this.formData.avatar = res.data.url\n        console.log(res.data.url)\n      } else { // 执行失败\n        this.$message.error(res.message)\n      }\n    },\n\n\n\n    handleAvatarSuccess (res,file) {\n      this.imageUrl = URL.createObjectURL(file.raw)\n    },\n\n\n\n    beforeAvatarUpload (file) {\n      const isJPG = file.type === 'image/jpeg'\n      const isLt5M = file.size / 1024 / 1024 < 5\n\n      if (!isJPG) {\n        this.$message.error('上传头像图片只能是 JPG 格式!')\n      }\n      if (!isLt5M) {\n        this.$message.error('上传头像图片大小不能超过5MB!')\n      }\n      return isJPG && isLt5M\n    },\n\n\n\n        //  更新个人信息\n    submitForm () {\n      // 进行表单校验\n      this.$refs.userForm.validate((valid) => {\n        if (valid) \n        \n        {\n          // 表单校验通过，发ajax请求，把数据录入至后台处理\n          this.formData.uid = sessionStorage.getItem('admin_blogid')\n          \n          console.log(this.formData.username)\n          console.log(this.formData.uid)\n          this.$axios.put('/user', this.formData).then((res) => {\n            \n\n           \n\n\n            \n              if(res.data.flag) {\n              // 弹出提示信息\n              this.$message({\n                message: '修改成功！',\n                type: 'success'\n              })\n            } \n            \n            \n            else { // 执行失败\n              this.$message.error(res.data.message)\n            }\n                    this.getUser()\n          })\n        } \n        \n        \n        \n        else \n        { // 校验不通过\n          this.$message.error('校验失败，请检查输入格式')\n          return false\n        }\n\n\n      })\n    },\n\n\n    resetForm (formName) {\n      this.$refs[formName].resetFields()\n    },\n\n\n\n\n      //先获取当前用户的个人信息 \n    getUser () {\n\n\n       this.$axios.get('/user/'+sessionStorage.getItem('admin_blogid')).then((res) => {\n            // 关闭新增窗口\n\n            \n            this.formData = res.data.data\n           \n          })\n\n\n\n    }\n  }\n\n\n\n\n\n}\n</script>\n\n<style  scoped>\n\n  @import \"../../assets/css/me.css\";\n  @import \"../../assets/css/style.css\";\n\n</style>\n"]}]}