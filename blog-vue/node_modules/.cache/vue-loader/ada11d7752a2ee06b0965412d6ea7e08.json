{"remainingRequest":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Program Files\\_MY\\项目\\博客\\blog-master\\src\\views\\personal.vue?vue&type=style&index=0&id=943e4af4&scoped=true&lang=css&","dependencies":[{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\src\\views\\personal.vue","mtime":1705065876000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBpbXBvcnQgIi4uL2Fzc2V0cy9jc3MvbWUuY3NzIjsKQGltcG9ydCAiLi4vYXNzZXRzL2Nzcy9zdHlsZS5jc3MiOwoK"},{"version":3,"sources":["personal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoSA;AACA","file":"personal.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"blogs\">\n    <div class=\"content-header\">\n      <h1><small>个人信息</small></h1>\n      <el-breadcrumb separator-class=\"el-icon-arrow-right\" class=\"breadcrumb\">\n        \n      </el-breadcrumb>\n    </div>\n\n    <!--中间内容-->\n    <div class=\"app-container\">\n      <div class=\"box\">\n\n\n\n\n        <el-form :model=\"formData\" :rules=\"userRules\" ref=\"userForm\" label-width=\"100px\">\n         \n          <el-row>\n            <el-col :span=\"8\">\n              <el-form-item prop=\"username\" label=\"用户名\" >\n                <el-input v-model=\"formData.username\" ></el-input>\n              </el-form-item>\n            </el-col>\n\n\n            <el-col :span=\"8\">\n              <el-form-item prop=\"password\" label=\"密码\">\n                <el-input v-model=\"formData.password\"></el-input>\n              </el-form-item>\n            </el-col>\n            \n          </el-row>\n         \n\n\n\n            <el-form-item prop=\"avatar\" label=\"头像地址\">\n             \n              <el-input style=\"width: 78%\" v-model=\"formData.avatar\"></el-input>\n            \n           \n            </el-form-item>\n\n           \n\n          <el-row>\n            <el-col :span=\"8\">\n              <el-form-item prop=\"username\" label=\"用户状态\" >\n                <el-input :value=\"state\" type=\"text\"></el-input>\n              </el-form-item>\n            </el-col>\n            \n            <el-col>\n\n               <!--           申请博主           -->\n               <el-form-item prop=\"password\" label=\"申请博主\" v-show=\"formData.isFlag==0\">\n                      \n                            <el-switch  v-model=\"value\" @change=\"accept\">     </el-switch>\n\n                    </el-form-item>\n            </el-col>\n           \n                    \n                    </el-row>\n\n\n          <el-form-item>\n\n\n                    \n\n\n            <el-button type=\"primary\" @click=\"submitForm\" >立即修改</el-button>\n<!--            <el-button @click=\"resetForm('formData')\">重置</el-button>-->\n          </el-form-item>\n\n\n\n\n        </el-form>\n\n        \n      </div>\n    </div>\n    <br>\n    <br>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n\n      value:false,\n\n      imageUrl: '',\n\n    //表单绑定的数据， \n      formData: {},\n\n\n\n      userRules: {\n        // 验证用户名是否合法\n        \n        // 验证密码是否合法\n        password: [\n          { required: true, message: '请输入登录密码', trigger: 'blur' },\n          { min: 6, max: 20, message: '长度在 6 到 20 个字符', trigger: 'blur' }\n        ],\n      \n        avatar: [\n          { required: true, message: '请输入头像地址', trigger: 'blur' },\n          { min: 1, max: 150, message: '长度在 1 到 150 个字符', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n\n\n  created () {\n\n\n    this.getUser()\n\n\n  },\n computed:{\n     state(){\n\n                 let text='' \n            if(this.formData.isFlag==0)\n            { \n                text = '普通用户'\n                }\n\n            else if(this.formData.isFlag==1)\n            {\n                text='申请博主中'\n                }\n\n            else if(this.formData.isFlag==2)\n            {\n                text='博主'\n            }\n            else if(this.formData.isFlag==-1)\n            {\n                text='管理员'\n            }\n\n          return text\n\n     }\n\n },\n\n\n\n  methods: {\n\n       accept(){\n\n                    this.formData.isFlag = 1\n                    \n\n                    this.$message.success('已经申请博主，等待管理员审核！')\n\n          \n          },\n    masterFileMax (files, fileList) {\n      console.log(files, fileList)\n      this.$message.warning('请最多上传一张图片')\n    },\n\n\n\n\n     uploadPic (param) {\n      var fileObj = param.file\n      var form = new FormData()\n      // 文件对象\n      form.append('file', fileObj)\n      const { data: res } =  this.$http.post('/serverApi/oss/userAvatar', form)\n      if (res.flag) {\n        // 弹出提示信息\n        this.$message.success('上传头像成功')\n        this.formData.avatar = res.data.url\n        console.log(res.data.url)\n      } else { // 执行失败\n        this.$message.error(res.message)\n      }\n    },\n\n\n\n    handleAvatarSuccess (res, file) {\n      this.imageUrl = URL.createObjectURL(file.raw)\n    },\n\n\n\n    beforeAvatarUpload (file) {\n      const isJPG = file.type === 'image/jpeg'\n      const isLt5M = file.size / 1024 / 1024 < 5\n\n      if (!isJPG) {\n        this.$message.error('上传头像图片只能是 JPG 格式!')\n      }\n      if (!isLt5M) {\n        this.$message.error('上传头像图片大小不能超过5MB!')\n      }\n      return isJPG && isLt5M\n    },\n\n\n        //  更新个人信息\n    submitForm () {\n      // 进行表单校验\n      this.$refs.userForm.validate((valid) => {\n        if (valid) \n        \n        {\n          // 表单校验通过，发ajax请求，把数据录入至后台处理\n          this.formData.uid = sessionStorage.getItem('uid')\n          \n          console.log(this.formData.username)\n          console.log(this.formData.uid)\n          this.$axios.put('/user', this.formData).then((res) => {\n            \n\n            this.getUser()\n\n            if (res.data.flag) {\n              // 弹出提示信息\n              this.$message({\n                message: '修改成功！',\n                type: 'success'\n              })\n            } else { // 执行失败\n              this.$message.error(res.data.message)\n            }\n          })\n        } \n        \n        \n        \n        else \n        { // 校验不通过\n          this.$message.error('校验失败，请检查输入格式')\n          return false\n        }\n\n\n      })\n    },\n\n\n    resetForm (formName) {\n      this.$refs[formName].resetFields()\n    },\n\n\n\n\n      //先获取当前用户的个人信息 \n    getUser () {\n\n\n       this.$axios.get('/user/'+sessionStorage.getItem('uid')).then((res) => {\n            // 关闭新增窗口\n\n            \n            this.formData = res.data.data\n           \n          })\n\n\n\n    }\n  }\n\n\n\n\n\n}\n</script>\n\n<style  scoped>\n\n  @import \"../assets/css/me.css\";\n  @import \"../assets/css/style.css\";\n\n</style>\n"]}]}