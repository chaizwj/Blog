{"remainingRequest":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Program Files\\_MY\\项目\\博客\\blog-master\\src\\views\\Message.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\src\\views\\Message.vue","mtime":1705065876000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJwppbXBvcnQgeyB2dWVCYWJlcnJhZ2UgfSBmcm9tICd2dWUtYmFiZXJyYWdlJwpWdWUudXNlKHZ1ZUJhYmVycmFnZSkKZXhwb3J0IGRlZmF1bHQgewogIGNyZWF0ZWQgKCkgewogICAgdGhpcy5hdmF0YXIgPSB0aGlzLiRzdG9yZS5zdGF0ZS5hdmF0YXIKICAgIHRoaXMubmlja25hbWUgPSB0aGlzLiRzdG9yZS5zdGF0ZS5uaWNrbmFtZQogIH0sCiAgbW91bnRlZCAoKSB7CiAgICB0aGlzLmxpc3RNZXNzYWdlKCkKICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgYXZhdGFyOiAnJywKICAgICAgbmlja25hbWU6ICcnLAogICAgICBzaG93OiBmYWxzZSwKICAgICAgbWVzc2FnZUNvbnRlbnQ6ICcnLAogICAgICBiYXJyYWdlTGlzdDogW10KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGFkZFRvTGlzdCAoKSB7CiAgICAgIGlmICh0aGlzLm1lc3NhZ2VDb250ZW50LnRyaW0oKSA9PT0gJycpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmluZm8oJ+eVmeiogOS4jeiDveS4uuepuicpCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgICAgY29uc3QgdXNlckF2YXRhciA9IHRoaXMuYXZhdGFyCiAgICAgICAgPyB0aGlzLmF2YXRhcgogICAgICAgIDogJ2h0dHBzOi8vci5waG90by5zdG9yZS5xcS5jb20vcHNjPy9WNTNLY1hmYjF1bW9ubjRIYklUdTNySU54czQzVGN6RC80NU5CdXpESVc0ODlRQm9WZXA1bWNjSlVvNypxNmdhTVBabWJGRFNXOHRqbUFtNFh3dW9VWm1NS3czYXNtdm4xbXhzRSpUZjBmai5WT2gyRzZPWDd2NGR1Rk9mZWRWMm9HTlEqR3JKRVBrQSEvcicKICAgICAgY29uc3QgdXNlck5pY2tuYW1lID0gdGhpcy5uaWNrbmFtZQogICAgICAgID8gdGhpcy5uaWNrbmFtZQogICAgICAgIDogJycKICAgICAgY29uc3QgbWVzc2FnZSA9IHsKICAgICAgICBhdmF0YXI6IHVzZXJBdmF0YXIsCiAgICAgICAgbmlja25hbWU6IHVzZXJOaWNrbmFtZSwKICAgICAgICBtZXNzYWdlQ29udGVudDogdGhpcy5tZXNzYWdlQ29udGVudCwKICAgICAgICB0aW1lOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCArIDYpCiAgICAgIH0KICAgICAgdGhpcy5iYXJyYWdlTGlzdC5wdXNoKG1lc3NhZ2UpCiAgICAgIHRoaXMubWVzc2FnZUNvbnRlbnQgPSAnJwogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCcvYXBpL3NlcnZlci9tZXNzYWdlL2FkZCcsIG1lc3NhZ2UpCiAgICAgIC8vIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoJy9leHRlbnNpb24vbWVzc2FnZS9hZGQnLCBtZXNzYWdlKQogICAgICBpZiAocmVzLmZsYWcpIHsKICAgICAgICAvLyDlvLnlh7rmj5DnpLrkv6Hmga8KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aWsOWinueVmeiogOaIkOWKnycpCiAgICAgIH0gZWxzZSB7IC8vIOaJp+ihjOWksei0pQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+eVmeiogOWksei0pScpCiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBsaXN0TWVzc2FnZSAoKSB7CiAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLmdldCgnL2FwaS9zZXJ2ZXIvbWVzc2FnZS9nZXRNZXNzYWdlTGlzdCcpCiAgICAgIC8vIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLmdldCgnL2V4dGVuc2lvbi9tZXNzYWdlL2dldE1lc3NhZ2VMaXN0JykKICAgICAgaWYgKHJlcy5mbGFnKSB7CiAgICAgICAgLy8gdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tZXNzYWdlKQogICAgICAgIHRoaXMuYmFycmFnZUxpc3QgPSByZXMuZGF0YQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpCiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["Message.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Message.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <!-- banner -->\n    <div class=\"message-banner\">\n      <!-- 弹幕输入框 -->\n      <div class=\"message-container\">\n        <h1 class=\"message-title\">留言板</h1>\n        <div class=\"animated fadeInUp message-input-wrapper\">\n          <input\n            v-model=\"messageContent\"\n            @click=\"show = true\"\n            placeholder=\"说点什么吧\" style=\"background: transparent;\"\n          />\n          <button\n            class=\"ml-3 animated bounceInLeft\"\n            @click=\"addToList\"\n            v-show=\"show\"\n          >\n            发送\n          </button>\n        </div>\n      </div>\n      <!-- 弹幕列表 -->\n      <div class=\"barrage-container\">\n        <vue-baberrage :barrageList=\"barrageList\" :loop=\"true\">\n          <template v-slot:default=\"slotProps\">\n            <span class=\"barrage-items\">\n              <img\n                :src=\"slotProps.item.avatar\"\n                width=\"30\"\n                height=\"30\"\n                style=\"border-radius:50%\"\n              />\n              <span class=\"ml-2\">{{ slotProps.item.nickname }} :</span>\n              <span class=\"ml-2\">{{ slotProps.item.messageContent }}</span>\n            </span>\n          </template>\n        </vue-baberrage>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport { vueBaberrage } from 'vue-baberrage'\nVue.use(vueBaberrage)\nexport default {\n  created () {\n    this.avatar = this.$store.state.avatar\n    this.nickname = this.$store.state.nickname\n  },\n  mounted () {\n    this.listMessage()\n  },\n  data () {\n    return {\n      avatar: '',\n      nickname: '',\n      show: false,\n      messageContent: '',\n      barrageList: []\n    }\n  },\n  methods: {\n    async addToList () {\n      if (this.messageContent.trim() === '') {\n        this.$message.info('留言不能为空')\n        return false\n      }\n      const userAvatar = this.avatar\n        ? this.avatar\n        : 'https://r.photo.store.qq.com/psc?/V53KcXfb1umonn4HbITu3rINxs43TczD/45NBuzDIW489QBoVep5mccJUo7*q6gaMPZmbFDSW8tjmAm4XwuoUZmMKw3asmvn1mxsE*Tf0fj.VOh2G6OX7v4duFOfedV2oGNQ*GrJEPkA!/r'\n      const userNickname = this.nickname\n        ? this.nickname\n        : ''\n      const message = {\n        avatar: userAvatar,\n        nickname: userNickname,\n        messageContent: this.messageContent,\n        time: Math.floor(Math.random() * 10 + 6)\n      }\n      this.barrageList.push(message)\n      this.messageContent = ''\n      const { data: res } = await this.$http.post('/api/server/message/add', message)\n      // const { data: res } = await this.$http.post('/extension/message/add', message)\n      if (res.flag) {\n        // 弹出提示信息\n        this.$message.success('新增留言成功')\n      } else { // 执行失败\n        this.$message.error('留言失败')\n      }\n    },\n    async listMessage () {\n      const { data: res } = await this.$http.get('/api/server/message/getMessageList')\n      // const { data: res } = await this.$http.get('/extension/message/getMessageList')\n      if (res.flag) {\n        // this.$message.success(res.message)\n        this.barrageList = res.data\n      } else {\n        this.$message.error(res.message)\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .message-banner {\n    position: absolute;\n    /*top: -58px;*/\n    left: 0;\n    right: 0;\n    height: 100vh;\n    background: url(\"../assets/images/1.jpg\")center center /\n    cover no-repeat;\n    background-color: #49b1f5;\n    animation: header-effect 1s;\n  }\n  .message-title {\n    color: #eee;\n    animation: title-scale 1s;\n  }\n  .message-container {\n    position: absolute;\n    width: 360px;\n    top: 35%;\n    left: 0;\n    right: 0;\n    text-align: center;\n    z-index: 5;\n    margin: 0 auto;\n    color: #fff;\n  }\n  .message-input-wrapper {\n    display: flex;\n    justify-content: center;\n    height: 2.5rem;\n    margin-top: 2rem;\n  }\n  .message-input-wrapper input {\n    outline: none;\n    width: 70%;\n    border-radius: 20px;\n    height: 100%;\n    padding: 0 1.25rem;\n    color: #eee;\n    border: #fff 1px solid;\n  }\n  .message-input-wrapper input::-webkit-input-placeholder {\n    color: #eeee;\n  }\n  .message-input-wrapper button {\n    outline: none;\n    border-radius: 20px;\n    height: 100%;\n    padding: 0 1.25rem;\n    border: #fff 1px solid;\n  }\n  .barrage-container {\n    position: absolute;\n    top: 50px;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    height: calc(100% - 50px);\n    width: 100%;\n  }\n  .barrage-items {\n    background: rgb(0, 0, 0, 0.7);\n    border-radius: 100px;\n    color: #fff;\n    padding: 5px 10px 5px 5px;\n    align-items: center;\n    display: flex;\n  }\n</style>\n"]}]}