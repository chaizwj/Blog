{"remainingRequest":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\babel-loader\\lib\\index.js!C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Program Files\\_MY\\项目\\博客\\blog-master\\src\\views\\Message.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\src\\views\\Message.vue","mtime":1705065876000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\babel.config.js","mtime":1705065876000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Program Files\\_MY\\项目\\博客\\blog-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxQcm9ncmFtIEZpbGVzXFxfTVlcXFx1OTg3OVx1NzZFRVxcXHU1MzVBXHU1QkEyXFxibG9nLW1hc3Rlclxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHZ1ZUJhYmVycmFnZSB9IGZyb20gJ3Z1ZS1iYWJlcnJhZ2UnOwpWdWUudXNlKHZ1ZUJhYmVycmFnZSk7CmV4cG9ydCBkZWZhdWx0IHsKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5hdmF0YXIgPSB0aGlzLiRzdG9yZS5zdGF0ZS5hdmF0YXI7CiAgICB0aGlzLm5pY2tuYW1lID0gdGhpcy4kc3RvcmUuc3RhdGUubmlja25hbWU7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5saXN0TWVzc2FnZSgpOwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGF2YXRhcjogJycsCiAgICAgIG5pY2tuYW1lOiAnJywKICAgICAgc2hvdzogZmFsc2UsCiAgICAgIG1lc3NhZ2VDb250ZW50OiAnJywKICAgICAgYmFycmFnZUxpc3Q6IFtdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgYWRkVG9MaXN0OiBmdW5jdGlvbiBhZGRUb0xpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciB1c2VyQXZhdGFyLCB1c2VyTmlja25hbWUsIG1lc3NhZ2UsIF95aWVsZCRfdGhpcyQkaHR0cCRwbywgcmVzOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIShfdGhpcy5tZXNzYWdlQ29udGVudC50cmltKCkgPT09ICcnKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2UuaW5mbygn55WZ6KiA5LiN6IO95Li656m6Jyk7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICB1c2VyQXZhdGFyID0gX3RoaXMuYXZhdGFyID8gX3RoaXMuYXZhdGFyIDogJ2h0dHBzOi8vci5waG90by5zdG9yZS5xcS5jb20vcHNjPy9WNTNLY1hmYjF1bW9ubjRIYklUdTNySU54czQzVGN6RC80NU5CdXpESVc0ODlRQm9WZXA1bWNjSlVvNypxNmdhTVBabWJGRFNXOHRqbUFtNFh3dW9VWm1NS3czYXNtdm4xbXhzRSpUZjBmai5WT2gyRzZPWDd2NGR1Rk9mZWRWMm9HTlEqR3JKRVBrQSEvcic7CiAgICAgICAgICAgICAgICB1c2VyTmlja25hbWUgPSBfdGhpcy5uaWNrbmFtZSA/IF90aGlzLm5pY2tuYW1lIDogJyc7CiAgICAgICAgICAgICAgICBtZXNzYWdlID0gewogICAgICAgICAgICAgICAgICBhdmF0YXI6IHVzZXJBdmF0YXIsCiAgICAgICAgICAgICAgICAgIG5pY2tuYW1lOiB1c2VyTmlja25hbWUsCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2VDb250ZW50OiBfdGhpcy5tZXNzYWdlQ29udGVudCwKICAgICAgICAgICAgICAgICAgdGltZTogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAgKyA2KQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBfdGhpcy5iYXJyYWdlTGlzdC5wdXNoKG1lc3NhZ2UpOwoKICAgICAgICAgICAgICAgIF90aGlzLm1lc3NhZ2VDb250ZW50ID0gJyc7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJGh0dHAucG9zdCgnL2FwaS9zZXJ2ZXIvbWVzc2FnZS9hZGQnLCBtZXNzYWdlKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF95aWVsZCRfdGhpcyQkaHR0cCRwbyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICByZXMgPSBfeWllbGQkX3RoaXMkJGh0dHAkcG8uZGF0YTsKCiAgICAgICAgICAgICAgICAvLyBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCcvZXh0ZW5zaW9uL21lc3NhZ2UvYWRkJywgbWVzc2FnZSkKICAgICAgICAgICAgICAgIGlmIChyZXMuZmxhZykgewogICAgICAgICAgICAgICAgICAvLyDlvLnlh7rmj5DnpLrkv6Hmga8KICAgICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5paw5aKe55WZ6KiA5oiQ5YqfJyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAvLyDmiafooYzlpLHotKUKICAgICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoJ+eVmeiogOWksei0pScpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxpc3RNZXNzYWdlOiBmdW5jdGlvbiBsaXN0TWVzc2FnZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgX3lpZWxkJF90aGlzMiQkaHR0cCRnLCByZXM7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLiRodHRwLmdldCgnL2FwaS9zZXJ2ZXIvbWVzc2FnZS9nZXRNZXNzYWdlTGlzdCcpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBfeWllbGQkX3RoaXMyJCRodHRwJGcgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIHJlcyA9IF95aWVsZCRfdGhpczIkJGh0dHAkZy5kYXRhOwoKICAgICAgICAgICAgICAgIC8vIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLmdldCgnL2V4dGVuc2lvbi9tZXNzYWdlL2dldE1lc3NhZ2VMaXN0JykKICAgICAgICAgICAgICAgIGlmIChyZXMuZmxhZykgewogICAgICAgICAgICAgICAgICAvLyB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLm1lc3NhZ2UpCiAgICAgICAgICAgICAgICAgIF90aGlzMi5iYXJyYWdlTGlzdCA9IHJlcy5kYXRhOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLiRtZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Message.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA,OAAA,GAAA,MAAA,KAAA;AACA,SAAA,YAAA,QAAA,eAAA;AACA,GAAA,CAAA,GAAA,CAAA,YAAA;AACA,eAAA;AACA,EAAA,OADA,qBACA;AACA,SAAA,MAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,MAAA;AACA,SAAA,QAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,QAAA;AACA,GAJA;AAKA,EAAA,OALA,qBAKA;AACA,SAAA,WAAA;AACA,GAPA;AAQA,EAAA,IARA,kBAQA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,IAAA,EAAA,KAHA;AAIA,MAAA,cAAA,EAAA,EAJA;AAKA,MAAA,WAAA,EAAA;AALA,KAAA;AAOA,GAhBA;AAiBA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA,KAAA,CAAA,cAAA,CAAA,IAAA,OAAA,EADA;AAAA;AAAA;AAAA;;AAEA,gBAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,QAAA;;AAFA,iDAGA,KAHA;;AAAA;AAKA,gBAAA,UALA,GAKA,KAAA,CAAA,MAAA,GACA,KAAA,CAAA,MADA,GAEA,mLAPA;AAQA,gBAAA,YARA,GAQA,KAAA,CAAA,QAAA,GACA,KAAA,CAAA,QADA,GAEA,EAVA;AAWA,gBAAA,OAXA,GAWA;AACA,kBAAA,MAAA,EAAA,UADA;AAEA,kBAAA,QAAA,EAAA,YAFA;AAGA,kBAAA,cAAA,EAAA,KAAA,CAAA,cAHA;AAIA,kBAAA,IAAA,EAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,MAAA,KAAA,EAAA,GAAA,CAAA;AAJA,iBAXA;;AAiBA,gBAAA,KAAA,CAAA,WAAA,CAAA,IAAA,CAAA,OAAA;;AACA,gBAAA,KAAA,CAAA,cAAA,GAAA,EAAA;AAlBA;AAAA,uBAmBA,KAAA,CAAA,KAAA,CAAA,IAAA,CAAA,yBAAA,EAAA,OAAA,CAnBA;;AAAA;AAAA;AAmBA,gBAAA,GAnBA,yBAmBA,IAnBA;;AAoBA;AACA,oBAAA,GAAA,CAAA,IAAA,EAAA;AACA;AACA,kBAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,QAAA;AACA,iBAHA,MAGA;AAAA;AACA,kBAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,MAAA;AACA;;AA1BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2BA,KA5BA;AA6BA,IAAA,WA7BA,yBA6BA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,MAAA,CAAA,KAAA,CAAA,GAAA,CAAA,oCAAA,CADA;;AAAA;AAAA;AACA,gBAAA,GADA,yBACA,IADA;;AAEA;AACA,oBAAA,GAAA,CAAA,IAAA,EAAA;AACA;AACA,kBAAA,MAAA,CAAA,WAAA,GAAA,GAAA,CAAA,IAAA;AACA,iBAHA,MAGA;AACA,kBAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA,CAAA,OAAA;AACA;;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAtCA;AAjBA,CAAA","sourcesContent":["<template>\n  <div>\n    <!-- banner -->\n    <div class=\"message-banner\">\n      <!-- 弹幕输入框 -->\n      <div class=\"message-container\">\n        <h1 class=\"message-title\">留言板</h1>\n        <div class=\"animated fadeInUp message-input-wrapper\">\n          <input\n            v-model=\"messageContent\"\n            @click=\"show = true\"\n            placeholder=\"说点什么吧\" style=\"background: transparent;\"\n          />\n          <button\n            class=\"ml-3 animated bounceInLeft\"\n            @click=\"addToList\"\n            v-show=\"show\"\n          >\n            发送\n          </button>\n        </div>\n      </div>\n      <!-- 弹幕列表 -->\n      <div class=\"barrage-container\">\n        <vue-baberrage :barrageList=\"barrageList\" :loop=\"true\">\n          <template v-slot:default=\"slotProps\">\n            <span class=\"barrage-items\">\n              <img\n                :src=\"slotProps.item.avatar\"\n                width=\"30\"\n                height=\"30\"\n                style=\"border-radius:50%\"\n              />\n              <span class=\"ml-2\">{{ slotProps.item.nickname }} :</span>\n              <span class=\"ml-2\">{{ slotProps.item.messageContent }}</span>\n            </span>\n          </template>\n        </vue-baberrage>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport { vueBaberrage } from 'vue-baberrage'\nVue.use(vueBaberrage)\nexport default {\n  created () {\n    this.avatar = this.$store.state.avatar\n    this.nickname = this.$store.state.nickname\n  },\n  mounted () {\n    this.listMessage()\n  },\n  data () {\n    return {\n      avatar: '',\n      nickname: '',\n      show: false,\n      messageContent: '',\n      barrageList: []\n    }\n  },\n  methods: {\n    async addToList () {\n      if (this.messageContent.trim() === '') {\n        this.$message.info('留言不能为空')\n        return false\n      }\n      const userAvatar = this.avatar\n        ? this.avatar\n        : 'https://r.photo.store.qq.com/psc?/V53KcXfb1umonn4HbITu3rINxs43TczD/45NBuzDIW489QBoVep5mccJUo7*q6gaMPZmbFDSW8tjmAm4XwuoUZmMKw3asmvn1mxsE*Tf0fj.VOh2G6OX7v4duFOfedV2oGNQ*GrJEPkA!/r'\n      const userNickname = this.nickname\n        ? this.nickname\n        : ''\n      const message = {\n        avatar: userAvatar,\n        nickname: userNickname,\n        messageContent: this.messageContent,\n        time: Math.floor(Math.random() * 10 + 6)\n      }\n      this.barrageList.push(message)\n      this.messageContent = ''\n      const { data: res } = await this.$http.post('/api/server/message/add', message)\n      // const { data: res } = await this.$http.post('/extension/message/add', message)\n      if (res.flag) {\n        // 弹出提示信息\n        this.$message.success('新增留言成功')\n      } else { // 执行失败\n        this.$message.error('留言失败')\n      }\n    },\n    async listMessage () {\n      const { data: res } = await this.$http.get('/api/server/message/getMessageList')\n      // const { data: res } = await this.$http.get('/extension/message/getMessageList')\n      if (res.flag) {\n        // this.$message.success(res.message)\n        this.barrageList = res.data\n      } else {\n        this.$message.error(res.message)\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .message-banner {\n    position: absolute;\n    /*top: -58px;*/\n    left: 0;\n    right: 0;\n    height: 100vh;\n    background: url(\"../assets/images/1.jpg\")center center /\n    cover no-repeat;\n    background-color: #49b1f5;\n    animation: header-effect 1s;\n  }\n  .message-title {\n    color: #eee;\n    animation: title-scale 1s;\n  }\n  .message-container {\n    position: absolute;\n    width: 360px;\n    top: 35%;\n    left: 0;\n    right: 0;\n    text-align: center;\n    z-index: 5;\n    margin: 0 auto;\n    color: #fff;\n  }\n  .message-input-wrapper {\n    display: flex;\n    justify-content: center;\n    height: 2.5rem;\n    margin-top: 2rem;\n  }\n  .message-input-wrapper input {\n    outline: none;\n    width: 70%;\n    border-radius: 20px;\n    height: 100%;\n    padding: 0 1.25rem;\n    color: #eee;\n    border: #fff 1px solid;\n  }\n  .message-input-wrapper input::-webkit-input-placeholder {\n    color: #eeee;\n  }\n  .message-input-wrapper button {\n    outline: none;\n    border-radius: 20px;\n    height: 100%;\n    padding: 0 1.25rem;\n    border: #fff 1px solid;\n  }\n  .barrage-container {\n    position: absolute;\n    top: 50px;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    height: calc(100% - 50px);\n    width: 100%;\n  }\n  .barrage-items {\n    background: rgb(0, 0, 0, 0.7);\n    border-radius: 100px;\n    color: #fff;\n    padding: 5px 10px 5px 5px;\n    align-items: center;\n    display: flex;\n  }\n</style>\n"],"sourceRoot":"src/views"}]}